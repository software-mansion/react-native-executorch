"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[94807],{28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>a});var t=i(96540);const s={},o=t.createContext(s);function r(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(o.Provider,{value:n},e.children)}},43789:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>m,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"hooks/computer-vision/useImageEmbeddings","title":"useImageEmbeddings","description":"Learn how to use image embeddings models in your React Native applications with React Native ExecuTorch\'s useImageEmbeddings hook.","source":"@site/docs/03-hooks/02-computer-vision/useImageEmbeddings.md","sourceDirName":"03-hooks/02-computer-vision","slug":"/hooks/computer-vision/useImageEmbeddings","permalink":"/react-native-executorch/docs/next/hooks/computer-vision/useImageEmbeddings","draft":false,"unlisted":false,"editUrl":"https://github.com/software-mansion/react-native-executorch/edit/main/docs/docs/03-hooks/02-computer-vision/useImageEmbeddings.md","tags":[],"version":"current","frontMatter":{"title":"useImageEmbeddings","keywords":["image embedding","image embeddings","embeddings","react native","executorch","ai","machine learning","on-device","mobile ai","clip"],"description":"Learn how to use image embeddings models in your React Native applications with React Native ExecuTorch\'s useImageEmbeddings hook."},"sidebar":"tutorialSidebar","previous":{"title":"useClassification","permalink":"/react-native-executorch/docs/next/hooks/computer-vision/useClassification"},"next":{"title":"useImageSegmentation","permalink":"/react-native-executorch/docs/next/hooks/computer-vision/useImageSegmentation"}}');var s=i(74848),o=i(28453);const r={title:"useImageEmbeddings",keywords:["image embedding","image embeddings","embeddings","react native","executorch","ai","machine learning","on-device","mobile ai","clip"],description:"Learn how to use image embeddings models in your React Native applications with React Native ExecuTorch's useImageEmbeddings hook."},a=void 0,d={},c=[{value:"API Reference",id:"api-reference",level:2},{value:"High Level Overview",id:"high-level-overview",level:2},{value:"Arguments",id:"arguments",level:3},{value:"Returns",id:"returns",level:3},{value:"Running the model",id:"running-the-model",level:2},{value:"Example",id:"example",level:2},{value:"Supported models",id:"supported-models",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Image Embedding is the process of converting an image into a numerical representation. This representation can be used for tasks, such as classification, clustering and (using contrastive learning like e.g. CLIP model) image search."}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["It is recommended to use models provided by us, which are available at our ",(0,s.jsx)(n.a,{href:"https://huggingface.co/collections/software-mansion/image-embeddings-68d0eda599a9d37caaaf1ad0",children:"Hugging Face repository"}),". You can also use ",(0,s.jsx)(n.a,{href:"https://github.com/software-mansion/react-native-executorch/blob/main/packages/react-native-executorch/src/constants/modelUrls.ts",children:"constants"})," shipped with our library."]})}),"\n",(0,s.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["For detailed API Reference for ",(0,s.jsx)(n.code,{children:"useImageEmbeddings"})," see: ",(0,s.jsxs)(n.a,{href:"/react-native-executorch/docs/next/api-reference/functions/useImageEmbeddings",children:[(0,s.jsx)(n.code,{children:"useImageEmbeddings"})," API Reference"]}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["For all image embeddings models available out-of-the-box in React Native ExecuTorch see: ",(0,s.jsx)(n.a,{href:"/react-native-executorch/docs/next/api-reference/#models---image-embeddings",children:"Image Embeddings Models"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"high-level-overview",children:"High Level Overview"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import {\n  useImageEmbeddings,\n  CLIP_VIT_BASE_PATCH32_IMAGE,\n} from 'react-native-executorch';\n\nconst model = useImageEmbeddings({ model: CLIP_VIT_BASE_PATCH32_IMAGE });\n\ntry {\n  const imageEmbedding = await model.forward('https://url-to-image.jpg');\n} catch (error) {\n  console.error(error);\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"arguments",children:"Arguments"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"useImageEmbeddings"})," takes ",(0,s.jsx)(n.a,{href:"/react-native-executorch/docs/next/api-reference/interfaces/ImageEmbeddingsProps",children:(0,s.jsx)(n.code,{children:"ImageEmbeddingsProps"})})," that consists of:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"model"})," containing ",(0,s.jsx)(n.a,{href:"/react-native-executorch/docs/next/api-reference/interfaces/ImageEmbeddingsProps#modelsource",children:(0,s.jsx)(n.code,{children:"modelSource"})}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["An optional flag ",(0,s.jsx)(n.a,{href:"/react-native-executorch/docs/next/api-reference/interfaces/ImageEmbeddingsProps#preventload",children:(0,s.jsx)(n.code,{children:"preventLoad"})})," which prevents auto-loading of the model."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"You need more details? Check the following resources:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["For detailed information about ",(0,s.jsx)(n.code,{children:"useImageEmbeddings"})," arguments check this section: ",(0,s.jsxs)(n.a,{href:"/react-native-executorch/docs/next/api-reference/functions/useImageEmbeddings#parameters",children:[(0,s.jsx)(n.code,{children:"useImageEmbeddings"})," arguments"]}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["For all image embeddings models available out-of-the-box in React Native ExecuTorch see: ",(0,s.jsx)(n.a,{href:"/react-native-executorch/docs/next/api-reference/#models---image-embeddings",children:"Image Embeddings Models"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["For more information on loading resources, take a look at ",(0,s.jsx)(n.a,{href:"/react-native-executorch/docs/next/fundamentals/loading-models",children:"loading models"})," page."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"returns",children:"Returns"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"useImageEmbeddings"})," returns an object called ",(0,s.jsx)(n.code,{children:"ImageEmbeddingsType"})," containing bunch of functions to interact with image embeddings models. To get more details please read: ",(0,s.jsxs)(n.a,{href:"/react-native-executorch/docs/next/api-reference/interfaces/ImageEmbeddingsType",children:[(0,s.jsx)(n.code,{children:"ImageEmbeddingsType"})," API Reference"]}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"running-the-model",children:"Running the model"}),"\n",(0,s.jsxs)(n.p,{children:["To run the model, you can use the ",(0,s.jsx)(n.a,{href:"/react-native-executorch/docs/next/api-reference/interfaces/ImageEmbeddingsType#forward",children:(0,s.jsx)(n.code,{children:"forward"})})," method. It accepts one argument which is a URI/URL to an image you want to encode or base64 (whole URI or only raw base64). The function returns a promise, which can resolve either to an error or an array of numbers representing the embedding."]}),"\n",(0,s.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const dotProduct = (a: Float32Array, b: Float32Array) =>\n  a.reduce((sum, val, i) => sum + val * b[i], 0);\n\nconst cosineSimilarity = (a: Float32Array, b: Float32Array) => {\n  const dot = dotProduct(a, b);\n  const normA = Math.sqrt(dotProduct(a, a));\n  const normB = Math.sqrt(dotProduct(b, b));\n  return dot / (normA * normB);\n};\n\ntry {\n  // we assume you've provided catImage and dogImage\n  const catImageEmbedding = await model.forward(catImage);\n  const dogImageEmbedding = await model.forward(dogImage);\n\n  const similarity = cosineSimilarity(catImageEmbedding, dogImageEmbedding);\n\n  console.log(`Cosine similarity: ${similarity}`);\n} catch (error) {\n  console.error(error);\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"supported-models",children:"Supported models"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Model"}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"Language"}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"Image size"}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"Embedding dimensions"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://huggingface.co/collections/software-mansion/image-embeddings",children:"clip-vit-base-patch32-image"})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"English"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"224\xd7224"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"512"}),(0,s.jsxs)(n.td,{children:["CLIP (Contrastive Language-Image Pre-Training) is a neural network trained on a variety of (image, text) pairs. CLIP allows to embed images and text into the same vector space. This allows to find similar images as well as to implement image search. This is the image encoder part of the CLIP model. To embed text checkout ",(0,s.jsx)(n.a,{href:"/react-native-executorch/docs/next/hooks/natural-language-processing/useTextEmbeddings#supported-models",children:"clip-vit-base-patch32-text"}),"."]})]})})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"Image size"})})," - The size of an image that the model takes as an input. Resize will happen automatically."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"Embedding Dimensions"})})," - The size of the output embedding vector. This is the number of dimensions in the vector representation of the input image."]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"For the supported models, the returned embedding vector is normalized, meaning that its length is equal to 1. This allows for easier comparison of vectors using cosine similarity, just calculate the dot product of two vectors to get the cosine similarity score."})})]})}function m(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);