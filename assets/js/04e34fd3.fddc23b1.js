"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[8058],{6909:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"hooks/computer-vision/useTextToImage","title":"useTextToImage","description":"Learn how to use image generation models in your React Native applications with React Native ExecuTorch\'s useTextToImage hook.","source":"@site/docs/03-hooks/02-computer-vision/useTextToImage.md","sourceDirName":"03-hooks/02-computer-vision","slug":"/hooks/computer-vision/useTextToImage","permalink":"/react-native-executorch/docs/next/hooks/computer-vision/useTextToImage","draft":false,"unlisted":false,"editUrl":"https://github.com/software-mansion/react-native-executorch/edit/main/docs/docs/03-hooks/02-computer-vision/useTextToImage.md","tags":[],"version":"current","frontMatter":{"title":"useTextToImage","keywords":["image generation"],"description":"Learn how to use image generation models in your React Native applications with React Native ExecuTorch\'s useTextToImage hook."},"sidebar":"tutorialSidebar","previous":{"title":"useStyleTransfer","permalink":"/react-native-executorch/docs/next/hooks/computer-vision/useStyleTransfer"},"next":{"title":"useVerticalOCR","permalink":"/react-native-executorch/docs/next/hooks/computer-vision/useVerticalOCR"}}');var o=n(74848),i=n(28453);const s={title:"useTextToImage",keywords:["image generation"],description:"Learn how to use image generation models in your React Native applications with React Native ExecuTorch's useTextToImage hook."},a=void 0,c={},d=[{value:"API Reference",id:"api-reference",level:2},{value:"High Level Overview",id:"high-level-overview",level:2},{value:"Arguments",id:"arguments",level:3},{value:"Returns",id:"returns",level:3},{value:"Running the model",id:"running-the-model",level:2},{value:"Example",id:"example",level:2},{value:"Supported models",id:"supported-models",level:2}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.p,{children:["Text-to-image is a process of generating images directly from a description in natural language by conditioning a model on the provided text input. Our implementation follows the Stable Diffusion pipeline, which applies the diffusion process in a lower-dimensional latent space to reduce memory requirements. The pipeline combines a text encoder to preprocess the prompt, a U-Net that iteratively denoises latent representations, and a VAE decoder to reconstruct the final image. React Native ExecuTorch offers a dedicated hook, ",(0,o.jsx)(t.code,{children:"useTextToImage"}),", for this task."]}),"\n",(0,o.jsx)(t.admonition,{type:"warning",children:(0,o.jsxs)(t.p,{children:["It is recommended to use models provided by us which are available at our ",(0,o.jsx)(t.a,{href:"https://huggingface.co/collections/software-mansion/text-to-image-68d0edf50ae6d20b5f9076cd",children:"Hugging Face repository"}),", you can also use ",(0,o.jsx)(t.a,{href:"https://github.com/software-mansion/react-native-executorch/blob/main/packages/react-native-executorch/src/constants/modelUrls.ts",children:"constants"})," shipped with our library."]})}),"\n",(0,o.jsx)(t.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["For detailed API Reference for ",(0,o.jsx)(t.code,{children:"useTextToImage"})," see: ",(0,o.jsxs)(t.a,{href:"/react-native-executorch/docs/next/api-reference/functions/useTextToImage",children:[(0,o.jsx)(t.code,{children:"useTextToImage"})," API Reference"]}),"."]}),"\n",(0,o.jsxs)(t.li,{children:["For all text to image models available out-of-the-box in React Native ExecuTorch see: ",(0,o.jsx)(t.a,{href:"/react-native-executorch/docs/next/api-reference/#models---image-generation",children:"Text to Image Models"}),"."]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"high-level-overview",children:"High Level Overview"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-typescript",children:"import { useTextToImage, BK_SDM_TINY_VPRED_256 } from 'react-native-executorch';\n\nconst model = useTextToImage({ model: BK_SDM_TINY_VPRED_256 });\n\nconst input = 'a castle';\n\ntry {\n  const image = await model.generate(input);\n} catch (error) {\n  console.error(error);\n}\n"})}),"\n",(0,o.jsx)(t.h3,{id:"arguments",children:"Arguments"}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.code,{children:"useTextToImage"})," takes ",(0,o.jsx)(t.a,{href:"/react-native-executorch/docs/next/api-reference/interfaces/TextToImageProps",children:(0,o.jsx)(t.code,{children:"TextToImageProps"})})," that consists of:"]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"model"})," containing ",(0,o.jsx)(t.a,{href:"/react-native-executorch/docs/next/api-reference/interfaces/TextToImageProps#schedulersource",children:(0,o.jsx)(t.code,{children:"schedulerSource"})}),", ",(0,o.jsx)(t.a,{href:"/react-native-executorch/docs/next/api-reference/interfaces/TextToImageProps#tokenizersource",children:(0,o.jsx)(t.code,{children:"tokenizerSource"})}),", ",(0,o.jsx)(t.a,{href:"/react-native-executorch/docs/next/api-reference/interfaces/TextToImageProps#encodersource",children:(0,o.jsx)(t.code,{children:"encoderSource"})}),", ",(0,o.jsx)(t.a,{href:"/react-native-executorch/docs/next/api-reference/interfaces/TextToImageProps#unetsource",children:(0,o.jsx)(t.code,{children:"unetSource"})}),", and ",(0,o.jsx)(t.a,{href:"/react-native-executorch/docs/next/api-reference/interfaces/TextToImageProps#decodersource",children:(0,o.jsx)(t.code,{children:"decoderSource"})}),"."]}),"\n",(0,o.jsxs)(t.li,{children:["An inference callback ",(0,o.jsx)(t.a,{href:"/react-native-executorch/docs/next/api-reference/interfaces/TextToImageProps#inferencecallback",children:(0,o.jsx)(t.code,{children:"inferenceCallback"})}),"."]}),"\n",(0,o.jsxs)(t.li,{children:["An optional flag ",(0,o.jsx)(t.a,{href:"/react-native-executorch/docs/next/api-reference/interfaces/TextToImageProps#preventload",children:(0,o.jsx)(t.code,{children:"preventLoad"})})," which prevents auto-loading of the model."]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"You need more details? Check the following resources:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["For detailed information about ",(0,o.jsx)(t.code,{children:"useTextToImage"})," arguments check this section: ",(0,o.jsxs)(t.a,{href:"/react-native-executorch/docs/next/api-reference/functions/useTextToImage#parameters",children:[(0,o.jsx)(t.code,{children:"useTextToImage"})," arguments"]}),"."]}),"\n",(0,o.jsxs)(t.li,{children:["For all text to image models available out-of-the-box in React Native ExecuTorch see: ",(0,o.jsx)(t.a,{href:"/react-native-executorch/docs/next/api-reference/#models---image-generation",children:"Text to Image Models"}),"."]}),"\n",(0,o.jsxs)(t.li,{children:["For more information on loading resources, take a look at ",(0,o.jsx)(t.a,{href:"/react-native-executorch/docs/next/fundamentals/loading-models",children:"loading models"})," page."]}),"\n"]}),"\n",(0,o.jsx)(t.h3,{id:"returns",children:"Returns"}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.code,{children:"useTextToImage"})," returns an object called ",(0,o.jsx)(t.code,{children:"TextToImageType"})," containing bunch of functions to interact with text to image models. To get more details please read: ",(0,o.jsxs)(t.a,{href:"/react-native-executorch/docs/next/api-reference/interfaces/TextToImageType",children:[(0,o.jsx)(t.code,{children:"TextToImageType"})," API Reference"]}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"running-the-model",children:"Running the model"}),"\n",(0,o.jsxs)(t.p,{children:["To run the model, you can use the ",(0,o.jsx)(t.a,{href:"/react-native-executorch/docs/next/api-reference/interfaces/TextToImageType#generate",children:(0,o.jsx)(t.code,{children:"generate"})})," method. It accepts four arguments: a text prompt describing the requested image, a size of the image in pixels, a number of denoising steps, and an optional seed value, which enables reproducibility of the results."]}),"\n",(0,o.jsx)(t.p,{children:"The image size must be a multiple of 32 due to the architecture of the U-Net and VAE models. The seed should be a positive integer."}),"\n",(0,o.jsx)(t.admonition,{type:"warning",children:(0,o.jsx)(t.p,{children:"Larger imageSize values require significantly more memory to run the model."})}),"\n",(0,o.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-tsx",children:"import { useTextToImage, BK_SDM_TINY_VPRED_256 } from 'react-native-executorch';\n\nfunction App() {\n  const model = useTextToImage({ model: BK_SDM_TINY_VPRED_256 });\n\n  //...\n  const input = 'a medieval castle by the sea shore';\n\n  const imageSize = 256;\n  const numSteps = 25;\n\n  try {\n    image = await model.generate(input, imageSize, numSteps);\n  } catch (error) {\n    console.error(error);\n  }\n  //...\n\n  return <Image source={{ uri: `data:image/png;base64,${image}` }} />;\n}\n"})}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{children:(0,o.jsx)(t.img,{alt:"Castle 256x256",src:n(97588).A+"",width:"320",height:"320"})}),(0,o.jsx)(t.th,{children:(0,o.jsx)(t.img,{alt:"Castle 512x512",src:n(41483).A+"",width:"320",height:"320"})})]})}),(0,o.jsx)(t.tbody,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"Image of size 256\xd7256"}),(0,o.jsx)(t.td,{children:"Image of size 512\xd7512"})]})})]}),"\n",(0,o.jsx)(t.h2,{id:"supported-models",children:"Supported models"}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{children:"Model"}),(0,o.jsx)(t.th,{children:"Parameters [B]"}),(0,o.jsx)(t.th,{children:"Description"})]})}),(0,o.jsx)(t.tbody,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.a,{href:"https://huggingface.co/vivym/bk-sdm-tiny-vpred",children:"bk-sdm-tiny-vpred"})}),(0,o.jsx)(t.td,{children:"0.5"}),(0,o.jsx)(t.td,{children:"BK-SDM (Block-removed Knowledge-distilled Stable Diffusion Model) is a compressed version of Stable Diffusion v1.4 with several residual and attention blocks removed. The BK-SDM-Tiny is a v-prediction variant of the model, obtained through further block removal, built around a 0.33B-parameter U-Net."})]})})]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>a});var r=n(96540);const o={},i=r.createContext(o);function s(e){const t=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(i.Provider,{value:t},e.children)}},41483:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/castle512-ce3f6cb4d1c34ca0703d57c8e164add9.png"},97588:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/castle256-f1bd9ddef581060ac70921b8a806ef5f.png"}}]);