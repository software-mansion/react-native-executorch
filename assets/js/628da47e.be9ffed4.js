"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[480],{5680:(e,t,n)=>{n.d(t,{xA:()=>g,yg:()=>c});var o=n(6540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=o.createContext({}),s=function(e){var t=o.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},g=function(e){var t=s(e.components);return o.createElement(d.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,d=e.parentName,g=i(e,["components","mdxType","originalType","parentName"]),u=s(n),m=r,c=u["".concat(d,".").concat(m)]||u[m]||p[m]||a;return n?o.createElement(c,l(l({ref:t},g),{},{components:n})):o.createElement(c,l({ref:t},g))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,l=new Array(a);l[0]=m;var i={};for(var d in t)hasOwnProperty.call(t,d)&&(i[d]=t[d]);i.originalType=e,i[u]="string"==typeof e?e:r,l[1]=i;for(var s=2;s<a;s++)l[s]=n[s];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7099:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>s});var o=n(8168),r=(n(6540),n(5680));const a={title:"LLMModule",sidebar_position:3},l=void 0,i={unversionedId:"hookless-api/LLMModule",id:"hookless-api/LLMModule",title:"LLMModule",description:"Hookless implementation of the useLLM hook.",source:"@site/docs/hookless-api/LLMModule.md",sourceDirName:"hookless-api",slug:"/hookless-api/LLMModule",permalink:"/react-native-executorch/docs/hookless-api/LLMModule",draft:!1,editUrl:"https://github.com/software-mansion/react-native-executorch/edit/main/docs/docs/hookless-api/LLMModule.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"LLMModule",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"ExecuTorchModule",permalink:"/react-native-executorch/docs/hookless-api/ExecutorchModule"},next:{title:"StyleTransferModule",permalink:"/react-native-executorch/docs/hookless-api/StyleTransferModule"}},d={},s=[{value:"Reference",id:"reference",level:2},{value:"Methods",id:"methods",level:3},{value:"Loading the model",id:"loading-the-model",level:2},{value:"Listening for download progress",id:"listening-for-download-progress",level:2},{value:"Running the model",id:"running-the-model",level:2},{value:"Listening for token",id:"listening-for-token",level:2},{value:"Interrupting the model",id:"interrupting-the-model",level:2},{value:"Deleting the model from memory",id:"deleting-the-model-from-memory",level:2}],g={toc:s},u="wrapper";function p(e){let{components:t,...n}=e;return(0,r.yg)(u,(0,o.A)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"Hookless implementation of the ",(0,r.yg)("a",{parentName:"p",href:"/react-native-executorch/docs/llms/useLLM"},"useLLM")," hook."),(0,r.yg)("h2",{id:"reference"},"Reference"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},"import {\n  LLMModule,\n  LLAMA3_2_1B_QLORA,\n  LLAMA3_2_1B_TOKENIZER,\n} from 'react-native-executorch';\n\n// Listening for download progress\nLLMModule.onDownloadProgress((progress) => {\n  console.log(progress);\n});\n\n// Loading the model\nawait LLMModule.load(LLAMA3_2_1B_QLORA, LLAMA3_2_1B_TOKENIZER);\n\n// Listening for token\nLLMModule.onToken((token) => {\n  console.log(token);\n});\n\n// Running the model\nLLMModule.generate('Hello, World!');\n\n// Interrupting the model\nLLMModule.interrupt();\n\n// Deleting the model from memory\nLLMModule.delete();\n")),(0,r.yg)("h3",{id:"methods"},"Methods"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Method"),(0,r.yg)("th",{parentName:"tr",align:null},"Type"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"load")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"LLMModule.load(modelSource: ResourceSource, tokenizerSource: ResourceSource, systemPrompt?: string, messageHistory?: MessageType[], contextWindowLength?: number): Promise<void>")),(0,r.yg)("td",{parentName:"tr",align:null},"Loads the model. Checkout the ",(0,r.yg)("a",{parentName:"td",href:"#loading-the-model"},"loading the model")," section for details.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"onDownloadProgress")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"(callback: (downloadProgress: number) => void): any")),(0,r.yg)("td",{parentName:"tr",align:null},"Subscribe to the download progress event.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"generate")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"(input: string): Promise<void>")),(0,r.yg)("td",{parentName:"tr",align:null},"Method to start generating a response with the given input string.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"onToken")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("code",null,"(callback: (data: string ","|"," undefined) => void): any")),(0,r.yg)("td",{parentName:"tr",align:null},"Subscribe to the token generation event.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"interrupt")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"(): void")),(0,r.yg)("td",{parentName:"tr",align:null},"Method to interrupt the current inference")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"delete")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"(): void")),(0,r.yg)("td",{parentName:"tr",align:null},"Method to delete the model from memory.")))),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Type definitions"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},"type ResourceSource = string | number;\n\ninterface MessageType {\n  role: 'user' | 'assistant';\n  content: string;\n}\n"))),(0,r.yg)("h2",{id:"loading-the-model"},"Loading the model"),(0,r.yg)("p",null,"To load the model, use the ",(0,r.yg)("inlineCode",{parentName:"p"},"load")," method. It accepts:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"modelSource")," - A string that specifies the location of the model binary. For more information, take a look at ",(0,r.yg)("a",{parentName:"li",href:"/react-native-executorch/docs/fundamentals/loading-models"},"loading models")," page."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"tokenizerSource")," - URL to the binary file which contains the tokenizer"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"systemPrompt"),' - Often used to tell the model what is its purpose, for example - "Be a helpful translator"'),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"messageHistory")," - An array of ",(0,r.yg)("inlineCode",{parentName:"li"},"MessageType")," objects that represent the conversation history. This can be used to provide context to the model."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"contextWindowLength")," - The number of messages from the current conversation that the model will use to generate a response. The higher the number, the more context the model will have. Keep in mind that using larger context windows will result in longer inference time and higher memory usage.")),(0,r.yg)("p",null,"This method returns a promise, which can resolve to an error or void."),(0,r.yg)("h2",{id:"listening-for-download-progress"},"Listening for download progress"),(0,r.yg)("p",null,"To subscribe to the download progress event, you can use the ",(0,r.yg)("inlineCode",{parentName:"p"},"onDownloadProgress")," method. It accepts a callback function that will be called whenever the download progress changes."),(0,r.yg)("h2",{id:"running-the-model"},"Running the model"),(0,r.yg)("p",null,"To run the model, you can use the ",(0,r.yg)("inlineCode",{parentName:"p"},"generate")," method. It accepts one argument, which is the input string. The method returns a promise, which can resolve to an error or void."),(0,r.yg)("h2",{id:"listening-for-token"},"Listening for token"),(0,r.yg)("p",null,"To subscribe to the token event, you can use the ",(0,r.yg)("inlineCode",{parentName:"p"},"onToken")," method. It accepts a callback function that will be called whenever a token is generated."),(0,r.yg)("h2",{id:"interrupting-the-model"},"Interrupting the model"),(0,r.yg)("p",null,"In order to interrupt the model, you can use the ",(0,r.yg)("inlineCode",{parentName:"p"},"interrupt")," method."),(0,r.yg)("h2",{id:"deleting-the-model-from-memory"},"Deleting the model from memory"),(0,r.yg)("p",null,"To delete the model from memory, you can use the ",(0,r.yg)("inlineCode",{parentName:"p"},"delete")," method."))}p.isMDXComponent=!0}}]);