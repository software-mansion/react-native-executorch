"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[55033],{28453:(e,t,n)=>{n.d(t,{R:()=>c,x:()=>i});var o=n(96540);const r={},s=o.createContext(r);function c(e){const t=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),o.createElement(s.Provider,{value:t},e.children)}},43821:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"hooks/natural-language-processing/useTextToSpeech","title":"useTextToSpeech","description":"Learn how to use text-to-speech models in your React Native applications with React Native ExecuTorch\'s useTextToSpeech hook.","source":"@site/versioned_docs/version-0.7.x/03-hooks/01-natural-language-processing/useTextToSpeech.md","sourceDirName":"03-hooks/01-natural-language-processing","slug":"/hooks/natural-language-processing/useTextToSpeech","permalink":"/react-native-executorch/docs/hooks/natural-language-processing/useTextToSpeech","draft":false,"unlisted":false,"editUrl":"https://github.com/software-mansion/react-native-executorch/edit/main/docs/versioned_docs/version-0.7.x/03-hooks/01-natural-language-processing/useTextToSpeech.md","tags":[],"version":"0.7.x","frontMatter":{"title":"useTextToSpeech","keywords":["text to speech tts","voice synthesizer","transcription","kokoro","react native","executorch","ai","machine learning","on-device","mobile ai"],"description":"Learn how to use text-to-speech models in your React Native applications with React Native ExecuTorch\'s useTextToSpeech hook."},"sidebar":"tutorialSidebar","previous":{"title":"useTextEmbeddings","permalink":"/react-native-executorch/docs/hooks/natural-language-processing/useTextEmbeddings"},"next":{"title":"useTokenizer","permalink":"/react-native-executorch/docs/hooks/natural-language-processing/useTokenizer"}}');var r=n(74848),s=n(28453);const c={title:"useTextToSpeech",keywords:["text to speech tts","voice synthesizer","transcription","kokoro","react native","executorch","ai","machine learning","on-device","mobile ai"],description:"Learn how to use text-to-speech models in your React Native applications with React Native ExecuTorch's useTextToSpeech hook."},i=void 0,a={},d=[{value:"API Reference",id:"api-reference",level:2},{value:"High Level Overview",id:"high-level-overview",level:2},{value:"Arguments",id:"arguments",level:3},{value:"Returns",id:"returns",level:3},{value:"Running the model",id:"running-the-model",level:2},{value:"Example",id:"example",level:2},{value:"Speech Synthesis",id:"speech-synthesis",level:3},{value:"Streaming Synthesis",id:"streaming-synthesis",level:3},{value:"Supported models",id:"supported-models",level:2}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"Text to speech is a task that allows to transform written text into spoken language. It is commonly used to implement features such as voice assistants, accessibility tools, or audiobooks."}),"\n",(0,r.jsx)(t.admonition,{type:"warning",children:(0,r.jsxs)(t.p,{children:["It is recommended to use models provided by us, which are available at our ",(0,r.jsx)(t.a,{href:"https://huggingface.co/software-mansion/react-native-executorch-kokoro",children:"Hugging Face repository"}),". You can also use ",(0,r.jsx)(t.a,{href:"https://github.com/software-mansion/react-native-executorch/blob/main/packages/react-native-executorch/src/constants/modelUrls.ts",children:"constants"})," shipped with our library."]})}),"\n",(0,r.jsx)(t.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["For detailed API Reference for ",(0,r.jsx)(t.code,{children:"useTextToSpeech"})," see: ",(0,r.jsxs)(t.a,{href:"/react-native-executorch/docs/api-reference/functions/useTextToSpeech",children:[(0,r.jsx)(t.code,{children:"useTextToSpeech"})," API Reference"]}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["For all text to speech models available out-of-the-box in React Native ExecuTorch see: ",(0,r.jsx)(t.a,{href:"/react-native-executorch/docs/api-reference/#models---text-to-speech",children:"TTS Models"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["For all supported voices in ",(0,r.jsx)(t.code,{children:"useTextToSpeech"})," please refer to: ",(0,r.jsx)(t.a,{href:"/react-native-executorch/docs/api-reference/#tts-supported-voices",children:"Supported Voices"})]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"high-level-overview",children:"High Level Overview"}),"\n",(0,r.jsx)(t.p,{children:"You can play the generated waveform in any way most suitable to you; however, in the snippet below we utilize the react-native-audio-api library to play synthesized speech."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"import {\n  useTextToSpeech,\n  KOKORO_MEDIUM,\n  KOKORO_VOICE_AF_HEART,\n} from 'react-native-executorch';\nimport { AudioContext } from 'react-native-audio-api';\n\nconst model = useTextToSpeech({\n  model: KOKORO_MEDIUM,\n  voice: KOKORO_VOICE_AF_HEART,\n});\n\nconst audioContext = new AudioContext({ sampleRate: 24000 });\n\nconst handleSpeech = async (text: string) => {\n  const speed = 1.0;\n  const waveform = await model.forward(text, speed);\n\n  const audioBuffer = audioContext.createBuffer(1, waveform.length, 24000);\n  audioBuffer.getChannelData(0).set(waveform);\n\n  const source = audioContext.createBufferSource();\n  source.buffer = audioBuffer;\n  source.connect(audioContext.destination);\n  source.start();\n};\n"})}),"\n",(0,r.jsx)(t.h3,{id:"arguments",children:"Arguments"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"useTextToSpeech"})," takes ",(0,r.jsx)(t.a,{href:"/react-native-executorch/docs/api-reference/interfaces/TextToSpeechProps",children:(0,r.jsx)(t.code,{children:"TextToSpeechProps"})})," that consists of:"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"model"})," of type ",(0,r.jsx)(t.a,{href:"/react-native-executorch/docs/api-reference/interfaces/KokoroConfig",children:(0,r.jsx)(t.code,{children:"KokoroConfig"})})," containing the ",(0,r.jsx)(t.a,{href:"/react-native-executorch/docs/api-reference/interfaces/KokoroConfig#durationpredictorsource",children:(0,r.jsx)(t.code,{children:"durationPredictorSource"})}),", ",(0,r.jsx)(t.a,{href:"/react-native-executorch/docs/api-reference/interfaces/KokoroConfig#synthesizersource",children:(0,r.jsx)(t.code,{children:"synthesizerSource"})}),", and ",(0,r.jsx)(t.a,{href:"/react-native-executorch/docs/api-reference/interfaces/KokoroConfig#type",children:(0,r.jsx)(t.code,{children:"type"})}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["An optional flag ",(0,r.jsx)(t.a,{href:"/react-native-executorch/docs/api-reference/interfaces/TextToSpeechProps#preventload",children:(0,r.jsx)(t.code,{children:"preventLoad"})})," which prevents auto-loading of the model."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"/react-native-executorch/docs/api-reference/interfaces/TextToSpeechProps#preventload",children:(0,r.jsx)(t.code,{children:"voice"})})," of type ",(0,r.jsx)(t.a,{href:"/react-native-executorch/docs/api-reference/interfaces/VoiceConfig",children:(0,r.jsx)(t.code,{children:"VoiceConfig"})})," - configuration of specific voice used in TTS."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"You need more details? Check the following resources:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["For detailed information about ",(0,r.jsx)(t.code,{children:"useTextToSpeech"})," arguments check this section: ",(0,r.jsxs)(t.a,{href:"/react-native-executorch/docs/api-reference/functions/useTextToSpeech#parameters",children:[(0,r.jsx)(t.code,{children:"useTextToSpeech"})," arguments"]}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["For all text to speech models available out-of-the-box in React Native ExecuTorch see: ",(0,r.jsx)(t.a,{href:"/react-native-executorch/docs/api-reference/#models---text-to-speech",children:"Text to Speech Models"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["For all supported voices in ",(0,r.jsx)(t.code,{children:"useTextToSpeech"})," please refer to: ",(0,r.jsx)(t.a,{href:"/react-native-executorch/docs/api-reference/#tts-supported-voices",children:"Supported Voices"})]}),"\n",(0,r.jsxs)(t.li,{children:["For more information on loading resources, take a look at ",(0,r.jsx)(t.a,{href:"/react-native-executorch/docs/fundamentals/loading-models",children:"loading models"})," page."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"returns",children:"Returns"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"useTextToSpeech"})," returns an object called ",(0,r.jsx)(t.code,{children:"TextToSpeechType"})," containing bunch of functions to interact with TTS. To get more details please read: ",(0,r.jsxs)(t.a,{href:"/react-native-executorch/docs/api-reference/interfaces/TextToSpeechType",children:[(0,r.jsx)(t.code,{children:"TextToSpeechType"})," API Reference"]}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"running-the-model",children:"Running the model"}),"\n",(0,r.jsx)(t.p,{children:"The module provides two ways to generate speech:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"/react-native-executorch/docs/api-reference/interfaces/TextToSpeechType#forward",children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"forward(text, speed)"})})}),": Generates the complete audio waveform at once. Returns a promise resolving to a ",(0,r.jsx)(t.code,{children:"Float32Array"}),"."]}),"\n"]}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsx)(t.p,{children:"Since it processes the entire text at once, it might take a significant amount of time to produce an audio for long text inputs."})}),"\n",(0,r.jsxs)(t.ol,{start:"2",children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"/react-native-executorch/docs/api-reference/interfaces/TextToSpeechType#stream",children:(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"stream({ text, speed })"})})}),': An async generator that yields chunks of audio as they are computed.\nThis is ideal for reducing the "time to first audio" for long sentences.']}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,r.jsx)(t.h3,{id:"speech-synthesis",children:"Speech Synthesis"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",children:"import React from 'react';\nimport { Button, View } from 'react-native';\nimport {\n  useTextToSpeech,\n  KOKORO_MEDIUM,\n  KOKORO_VOICE_AF_HEART,\n} from 'react-native-executorch';\nimport { AudioContext } from 'react-native-audio-api';\n\nexport default function App() {\n  const tts = useTextToSpeech({\n    model: KOKORO_MEDIUM,\n    voice: KOKORO_VOICE_AF_HEART,\n  });\n\n  const generateAudio = async () => {\n    const audioData = await tts.forward({\n      text: 'Hello world! This is a sample text.',\n    });\n\n    // Playback example\n    const ctx = new AudioContext({ sampleRate: 24000 });\n    const buffer = ctx.createBuffer(1, audioData.length, 24000);\n    buffer.getChannelData(0).set(audioData);\n\n    const source = ctx.createBufferSource();\n    source.buffer = buffer;\n    source.connect(ctx.destination);\n    source.start();\n  };\n\n  return (\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n      <Button title=\"Speak\" onPress={generateAudio} disabled={!tts.isReady} />\n    </View>\n  );\n}\n"})}),"\n",(0,r.jsx)(t.h3,{id:"streaming-synthesis",children:"Streaming Synthesis"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",children:"import React, { useRef } from 'react';\nimport { Button, View } from 'react-native';\nimport {\n  useTextToSpeech,\n  KOKORO_MEDIUM,\n  KOKORO_VOICE_AF_HEART,\n} from 'react-native-executorch';\nimport { AudioContext } from 'react-native-audio-api';\n\nexport default function App() {\n  const tts = useTextToSpeech({\n    model: KOKORO_MEDIUM,\n    voice: KOKORO_VOICE_AF_HEART,\n  });\n\n  const contextRef = useRef(new AudioContext({ sampleRate: 24000 }));\n\n  const generateStream = async () => {\n    const ctx = contextRef.current;\n\n    await tts.stream({\n      text: \"This is a longer text, which is being streamed chunk by chunk. Let's see how it works!\",\n      onNext: async (chunk) => {\n        return new Promise((resolve) => {\n          const buffer = ctx.createBuffer(1, chunk.length, 24000);\n          buffer.getChannelData(0).set(chunk);\n\n          const source = ctx.createBufferSource();\n          source.buffer = buffer;\n          source.connect(ctx.destination);\n          source.onEnded = () => resolve();\n          source.start();\n        });\n      },\n    });\n  };\n\n  return (\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n      <Button title=\"Stream\" onPress={generateStream} disabled={!tts.isReady} />\n    </View>\n  );\n}\n"})}),"\n",(0,r.jsx)(t.h2,{id:"supported-models",children:"Supported models"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Model"}),(0,r.jsx)(t.th,{style:{textAlign:"center"},children:"Language"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://huggingface.co/software-mansion/react-native-executorch-kokoro",children:"Kokoro"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:"English"})]})})]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);