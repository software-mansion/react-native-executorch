"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[254],{5680:(e,t,n)=>{n.d(t,{xA:()=>g,yg:()=>u});var a=n(6540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),m=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},g=function(e){var t=m(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,g=o(e,["components","mdxType","originalType","parentName"]),c=m(n),d=r,u=c["".concat(s,".").concat(d)]||c[d]||p[d]||i;return n?a.createElement(u,l(l({ref:t},g),{},{components:n})):a.createElement(u,l({ref:t},g))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[c]="string"==typeof e?e:r,l[1]=o;for(var m=2;m<i;m++)l[m]=n[m];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5726:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>m});var a=n(8168),r=(n(6540),n(5680));const i={title:"useClassification",sidebar_position:1},l=void 0,o={unversionedId:"computer-vision/useClassification",id:"computer-vision/useClassification",title:"useClassification",description:"Image classification is the process of assigning a label to an image that best describes its contents. For example, when given an image of a puppy, the image classifier should assign the puppy class to that image.",source:"@site/docs/computer-vision/useClassification.md",sourceDirName:"computer-vision",slug:"/computer-vision/useClassification",permalink:"/react-native-executorch/docs/computer-vision/useClassification",draft:!1,editUrl:"https://github.com/software-mansion/react-native-executorch/edit/main/docs/docs/computer-vision/useClassification.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"useClassification",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Computer Vision",permalink:"/react-native-executorch/docs/category/computer-vision"},next:{title:"useObjectDetection",permalink:"/react-native-executorch/docs/computer-vision/useObjectDetection"}},s={},m=[{value:"Reference",id:"reference",level:2},{value:"Arguments",id:"arguments",level:3},{value:"Returns",id:"returns",level:3},{value:"Running the model",id:"running-the-model",level:2},{value:"Example",id:"example",level:2},{value:"Supported models",id:"supported-models",level:2},{value:"Benchmarks",id:"benchmarks",level:2},{value:"Model size",id:"model-size",level:3},{value:"Memory usage",id:"memory-usage",level:3},{value:"Inference time",id:"inference-time",level:3}],g={toc:m},c="wrapper";function p(e){let{components:t,...n}=e;return(0,r.yg)(c,(0,a.A)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"Image classification is the process of assigning a label to an image that best describes its contents. For example, when given an image of a puppy, the image classifier should assign the puppy class to that image."),(0,r.yg)("admonition",{type:"info"},(0,r.yg)("p",{parentName:"admonition"},"Usually, the class with the highest probability is the one that is assigned to an image. However, if there are multiple classes with comparatively high probabilities, this may indicate that the model is not confident in its prediction.")),(0,r.yg)("admonition",{type:"caution"},(0,r.yg)("p",{parentName:"admonition"},"It is recommended to use models provided by us, which are available at our ",(0,r.yg)("a",{parentName:"p",href:"https://huggingface.co/software-mansion/react-native-executorch-efficientnet-v2-s"},"Hugging Face repository"),". You can also use ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/software-mansion/react-native-executorch/tree/main/src/constants/modelUrls.ts"},"constants")," shipped with our library")),(0,r.yg)("h2",{id:"reference"},"Reference"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},"import { useClassification, EFFICIENTNET_V2_S } from 'react-native-executorch';\n\nconst model = useClassification({\n  modelSource: EFFICIENTNET_V2_S,\n});\n\nconst imageUri = 'file::///Users/.../cute_puppy.png';\n\ntry {\n  const classesWithProbabilities = await model.forward(imageUri);\n} catch (error) {\n  console.error(error);\n}\n")),(0,r.yg)("h3",{id:"arguments"},"Arguments"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},(0,r.yg)("inlineCode",{parentName:"strong"},"modelSource")),"\nA string that specifies the location of the model binary. For more information, take a look at ",(0,r.yg)("a",{parentName:"p",href:"/react-native-executorch/docs/fundamentals/loading-models"},"loading models")," page."),(0,r.yg)("h3",{id:"returns"},"Returns"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Field"),(0,r.yg)("th",{parentName:"tr",align:null},"Type"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"forward")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"(input: string) => Promise<{ [category: string]: number }>")),(0,r.yg)("td",{parentName:"tr",align:null},"Executes the model's forward pass, where ",(0,r.yg)("inlineCode",{parentName:"td"},"input")," can be a fetchable resource or a Base64-encoded string.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"error")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("code",null,"string ","|"," null")),(0,r.yg)("td",{parentName:"tr",align:null},"Contains the error message if the model failed to load.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"isGenerating")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"boolean")),(0,r.yg)("td",{parentName:"tr",align:null},"Indicates whether the model is currently processing an inference.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"isReady")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"boolean")),(0,r.yg)("td",{parentName:"tr",align:null},"Indicates whether the model has successfully loaded and is ready for inference.")))),(0,r.yg)("h2",{id:"running-the-model"},"Running the model"),(0,r.yg)("p",null,"To run the model, you can use the ",(0,r.yg)("inlineCode",{parentName:"p"},"forward")," method. It accepts one argument, which is the image. The image can be a remote URL, a local file URI, or a base64-encoded image. The function returns a promise, which can resolve either to an error or an object containing categories with their probabilities."),(0,r.yg)("admonition",{type:"info"},(0,r.yg)("p",{parentName:"admonition"},"Images from external sources are stored in your application's temporary directory.")),(0,r.yg)("h2",{id:"example"},"Example"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},"import { useClassification, EFFICIENTNET_V2_S } from 'react-native-executorch';\n\nfunction App() {\n  const model = useClassification({\n    modulePath: EFFICIENTNET_V2_S,\n  });\n\n  ...\n  const imageUri = 'file:///Users/.../cute_puppy.png';\n\n  try {\n    const classesWithProbabilities = await model.forward(imageUri);\n\n    // Extract three classes with the highest probabilities\n    const topThreeClasses = Object.entries(classesWithProbabilities)\n      .sort(([, a], [, b]) => b - a)\n      .slice(0, 3)\n      .map(([label, score]) => ({ label, score }));\n  } catch (error) {\n    console.error(error);\n  }\n  ...\n}\n")),(0,r.yg)("h2",{id:"supported-models"},"Supported models"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Model"),(0,r.yg)("th",{parentName:"tr",align:null},"Number of classes"),(0,r.yg)("th",{parentName:"tr",align:null},"Class list"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://pytorch.org/vision/0.20/models/generated/torchvision.models.efficientnet_v2_s.html"},"efficientnet_v2_s")),(0,r.yg)("td",{parentName:"tr",align:null},"1000"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://github.com/software-mansion/react-native-executorch/blob/main/android/src/main/java/com/swmansion/rnexecutorch/models/classification/Constants.kt"},"ImageNet1k_v1"))))),(0,r.yg)("h2",{id:"benchmarks"},"Benchmarks"),(0,r.yg)("h3",{id:"model-size"},"Model size"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Model"),(0,r.yg)("th",{parentName:"tr",align:null},"XNNPACK ","[MB]"),(0,r.yg)("th",{parentName:"tr",align:null},"Core ML ","[MB]"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"EFFICIENTNET_V2_S"),(0,r.yg)("td",{parentName:"tr",align:null},"85.6"),(0,r.yg)("td",{parentName:"tr",align:null},"43.9")))),(0,r.yg)("h3",{id:"memory-usage"},"Memory usage"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Model"),(0,r.yg)("th",{parentName:"tr",align:null},"Android (XNNPACK) ","[MB]"),(0,r.yg)("th",{parentName:"tr",align:null},"iOS (Core ML) ","[MB]"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"EFFICIENTNET_V2_S"),(0,r.yg)("td",{parentName:"tr",align:null},"130"),(0,r.yg)("td",{parentName:"tr",align:null},"85")))),(0,r.yg)("h3",{id:"inference-time"},"Inference time"),(0,r.yg)("admonition",{title:"warning",type:"warning"},(0,r.yg)("p",{parentName:"admonition"},"Times presented in the tables are measured as consecutive runs of the model. Initial run times may be up to 2x longer due to model loading and initialization.")),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Model"),(0,r.yg)("th",{parentName:"tr",align:null},"iPhone 16 Pro (Core ML) ","[ms]"),(0,r.yg)("th",{parentName:"tr",align:null},"iPhone 13 Pro (Core ML) ","[ms]"),(0,r.yg)("th",{parentName:"tr",align:null},"iPhone SE 3 (Core ML) ","[ms]"),(0,r.yg)("th",{parentName:"tr",align:null},"Samsung Galaxy S24 (XNNPACK) ","[ms]"),(0,r.yg)("th",{parentName:"tr",align:null},"OnePlus 12 (XNNPACK) ","[ms]"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"EFFICIENTNET_V2_S"),(0,r.yg)("td",{parentName:"tr",align:null},"100"),(0,r.yg)("td",{parentName:"tr",align:null},"120"),(0,r.yg)("td",{parentName:"tr",align:null},"130"),(0,r.yg)("td",{parentName:"tr",align:null},"180"),(0,r.yg)("td",{parentName:"tr",align:null},"170")))))}p.isMDXComponent=!0}}]);