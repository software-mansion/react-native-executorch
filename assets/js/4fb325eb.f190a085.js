"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7114],{3522:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"typescript-api/ObjectDetectionModule","title":"ObjectDetectionModule","description":"TypeScript API implementation of the useObjectDetection hook.","source":"@site/docs/typescript-api/ObjectDetectionModule.md","sourceDirName":"typescript-api","slug":"/typescript-api/ObjectDetectionModule","permalink":"/react-native-executorch/docs/next/typescript-api/ObjectDetectionModule","draft":false,"unlisted":false,"editUrl":"https://github.com/software-mansion/react-native-executorch/edit/main/docs/docs/typescript-api/ObjectDetectionModule.md","tags":[],"version":"current","frontMatter":{"title":"ObjectDetectionModule"},"sidebar":"tutorialSidebar","previous":{"title":"ClassificationModule","permalink":"/react-native-executorch/docs/next/typescript-api/ClassificationModule"},"next":{"title":"StyleTransferModule","permalink":"/react-native-executorch/docs/next/typescript-api/StyleTransferModule"}}');var r=o(4848),c=o(8453);const i={title:"ObjectDetectionModule"},d=void 0,s={},a=[{value:"Reference",id:"reference",level:2},{value:"Methods",id:"methods",level:3},{value:"Loading the model",id:"loading-the-model",level:2},{value:"Running the model",id:"running-the-model",level:2},{value:"Managing memory",id:"managing-memory",level:2}];function l(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.R)(),...e.components},{Details:o}=t;return o||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["TypeScript API implementation of the ",(0,r.jsx)(t.a,{href:"/react-native-executorch/docs/next/computer-vision/useObjectDetection",children:"useObjectDetection"})," hook."]}),"\n",(0,r.jsx)(t.h2,{id:"reference",children:"Reference"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"import {\n  ObjectDetectionModule,\n  SSDLITE_320_MOBILENET_V3_LARGE,\n} from 'react-native-executorch';\n\nconst imageUri = 'path/to/image.png';\n\nconst module = new ObjectDetectionModule();\n\n// Loading the model\nawait module.load(SSDLITE_320_MOBILENET_V3_LARGE);\n\n// Running the model\nconst detections = await module.forward(imageUri);\n"})}),"\n",(0,r.jsx)(t.h3,{id:"methods",children:"Methods"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Method"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"load"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"(modelSource: ResourceSource, onDownloadProgressCallback: (_: number) => void () => {}): Promise<void>"})}),(0,r.jsxs)(t.td,{children:["Loads the model, where ",(0,r.jsx)(t.code,{children:"modelSource"})," is a string that specifies the location of the model binary. To track the download progress, supply a callback function ",(0,r.jsx)(t.code,{children:"onDownloadProgressCallback"}),"."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"forward"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"(input: string, detectionThreshold: number = 0.7): Promise<Detection[]>"})}),(0,r.jsxs)(t.td,{children:["Executes the model's forward pass, where ",(0,r.jsx)(t.code,{children:"input"})," can be a fetchable resource or a Base64-encoded string. ",(0,r.jsx)(t.code,{children:"detectionThreshold"})," can be supplied to alter the sensitivity of the detection."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"delete"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"(): void"})}),(0,r.jsxs)(t.td,{children:["Release the memory held by the module. Calling ",(0,r.jsx)(t.code,{children:"forward"})," afterwards is invalid."]})]})]})]}),"\n",(0,r.jsxs)(o,{children:[(0,r.jsx)("summary",{children:"Type definitions"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"type ResourceSource = string | number | object;\n\ninterface Bbox {\n  x1: number;\n  x2: number;\n  y1: number;\n  y2: number;\n}\n\ninterface Detection {\n  bbox: Bbox;\n  label: keyof typeof CocoLabel;\n  score: number;\n}\n"})})]}),"\n",(0,r.jsx)(t.h2,{id:"loading-the-model",children:"Loading the model"}),"\n",(0,r.jsxs)(t.p,{children:["To load the model, create a new instance of the module and use the ",(0,r.jsx)(t.code,{children:"load"})," method on it. It accepts the ",(0,r.jsx)(t.code,{children:"modelSource"})," which is a string that specifies the location of the model binary. For more information, take a look at ",(0,r.jsx)(t.a,{href:"/react-native-executorch/docs/next/fundamentals/loading-models",children:"loading models"})," page. This method returns a promise, which can resolve to an error or void."]}),"\n",(0,r.jsx)(t.h2,{id:"running-the-model",children:"Running the model"}),"\n",(0,r.jsxs)(t.p,{children:["To run the model, you can use the ",(0,r.jsx)(t.code,{children:"forward"})," method on the module object. It accepts one argument, which is the image. The image can be a remote URL, a local file URI, or a base64-encoded image. The method returns a promise, which can resolve either to an error or an array of ",(0,r.jsx)(t.code,{children:"Detection"})," objects. Each object contains coordinates of the bounding box, the label of the detected object, and the confidence score."]}),"\n",(0,r.jsx)(t.h2,{id:"managing-memory",children:"Managing memory"}),"\n",(0,r.jsxs)(t.p,{children:["The module is a regular JavaScript object, and as such its lifespan will be managed by the garbage collector. In most cases this should be enough, and you should not worry about freeing the memory of the module yourself, but in some cases you may want to release the memory occupied by the module before the garbage collector steps in. In this case use the method ",(0,r.jsx)(t.code,{children:"delete()"})," on the module object you will no longer use, and want to remove from the memory. Note that you cannot use ",(0,r.jsx)(t.code,{children:"forward"})," after ",(0,r.jsx)(t.code,{children:"delete"})," unless you load the module again."]})]})}function h(e={}){const{wrapper:t}={...(0,c.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,t,o)=>{o.d(t,{R:()=>i,x:()=>d});var n=o(6540);const r={},c=n.createContext(r);function i(e){const t=n.useContext(c);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(c.Provider,{value:t},e.children)}}}]);